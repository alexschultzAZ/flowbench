apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: kn-vidsplit-stateless
  namespace: default
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/min-scale: '1'
    spec:
      containers:
      - env:
        - name: NEXT_URL
          value: http://kn-modect-stateless.default.svc.cluster.local
        - name: OUTPUTBUCKET
          value: stage1
        - name: write_debug
          value: 'True'
        - name: STORAGE_TYPE
          value: obj
        - name: MN_FS
          value: 'False'
        - name: ENDPOINTINPUT
          value: 172.17.0.3:9000
        - name: PUSHGATEWAY_IP
          value: prom-pushgateway.default.svc.cluster.local:9091
        image: flowbench2024/kn-vidsplit-stateless
---
apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: kn-modect-stateless
  namespace: default
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/min-scale: '1'
    spec:
      containers:
      - env:
        - name: NEXT_URL
          value: http://kn-facextract-stateless.default.svc.cluster.local
        - name: OUTPUTBUCKET
          value: stage2
        - name: STORAGE_TYPE
          value: obj
        - name: PIPELINE_STAGE
          value: '2'
        - name: MODECT_MIN_AREA
          value: '5'
        - name: MODECT_SKIP_RATE
          value: '1'
        - name: write_debug
          value: 'True'
        - name: MN_FS
          value: 'False'
        - name: ENDPOINTINPUT
          value: 172.17.0.3:9000
        - name: PUSHGATEWAY_IP
          value: prom-pushgateway.default.svc.cluster.local:9091
        image: flowbench2024/kn-modect-stateless
---
apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: kn-facextract-stateless
  namespace: default
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/min-scale: '1'
    spec:
      containers:
      - env:
        - name: NEXT_URL
          value: http://kn-facerec-stateless.default.svc.cluster.local
        - name: OUTPUTBUCKET
          value: stage3
        - name: STORAGE_TYPE
          value: obj
        - name: PIPELINE_STAGE
          value: '2'
        - name: MODECT_MIN_AREA
          value: '5'
        - name: MODECT_SKIP_RATE
          value: '1'
        - name: write_debug
          value: 'True'
        - name: MN_FS
          value: 'False'
        - name: ENDPOINTINPUT
          value: 172.17.0.3:9000
        - name: PUSHGATEWAY_IP
          value: prom-pushgateway.default.svc.cluster.local:9091
        image: flowbench2024/kn-facextract-stateless
---
apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: kn-facerec-stateless
  namespace: default
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/min-scale: '1'
    spec:
      containers:
      - env:
        - name: OUTPUTBUCKET
          value: stage4
        - name: STORAGE_TYPE
          value: obj
        - name: PIPELINE_STAGE
          value: '2'
        - name: MODECT_MIN_AREA
          value: '5'
        - name: MODECT_SKIP_RATE
          value: '1'
        - name: write_debug
          value: 'True'
        - name: MN_FS
          value: 'False'
        - name: ENDPOINTINPUT
          value: 172.17.0.3:9000
        - name: PUSHGATEWAY_IP
          value: prom-pushgateway.default.svc.cluster.local:9091
        image: flowbench2024/kn-facerec-stateless
